<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./reset.css">
    <link rel="stylesheet" href="./musiclist.css">
    <title>网易云音乐-示例歌单</title>
</head>
<body>
<div class="topBarBannerContainer">
    <div class="topBarBannerBg"></div>
    <div class="topBarBanner">

            <div class="songListCover">
                <img src="http://opdzp4hj6.bkt.clouddn.com/images/demo/list04.jpeg" alt="">
                <i class="songListIcon">歌单</i>
                <span class="playAmount">164.5万</span>

            </div>
            <div class="songListTitle">
                <p>倾听自然 · 雨声轻弹</p>
                <div class="contributor">
                    <img src="http://opdzp4hj6.bkt.clouddn.com/avatar.jpeg" alt="头像" class="contributorAvatar">
                    <span class="contributorName">Avatar</span>
                </div>
            </div>
    </div>
</div>
<div class="songListInfo">
    <p class="songListTag">
        标签：<span>华语</span><span>欧美</span><span>古风</span>
    </p>
    <div class="songListSummary">
        <p>简介：优质歌曲</p>
        <p>总有那么一首歌，让接触Galgame的你泛起回忆。</p></div>
</div>
<div class="musicListsNameAvatar">
    <h3>歌曲列表</h3>
    <ol class="musicLists" id="musicLists"></ol>
</div>
<p class="bottomPrompt"><span></span>我是有底线的<span></span></p>
<div class="bottomDownload">
    <a href="./download.html">打开</a>
    <a href="./download.html">下载</a>
</div>
<script src="./vendors/jquery.min.js"></script>
<script src="./vendors/av-min.js"></script>
<script>
    //从leancloud获取歌曲数据
    var APP_ID = '1luhcRP3UEcL6HFn0yykbN2E-gzGzoHsz';
    var APP_KEY = 'AVYfJvkkS0MhiiYe0pd9H8Wz';

    AV.init({
        appId: APP_ID,
        appKey: APP_KEY
    });
    var query = new AV.Query('Song');
    //      渲染到歌单列表
    query.find().then(function (results) {
        for (var i = 0; i < 20; i++) {
            let songInfo = results[i].attributes
            let indexString
            if(i<9){
                indexString = '0'+(i+1)
            }else{
                indexString = i+1
            }
            let li =
                `<li>
                        <a href="./song.html?id=${results[i].id}">
                            <div class="songNameContainer">
                                <div class="ranking">${indexString}</div>
                                <div class="songName">
                                    <p>${songInfo.name}<span>${songInfo.subname}</span></p>
                                    <small>${songInfo.singer} - ${songInfo.album}</small>
                                </div>
                                <div class="playIcon"><i class="titleIcon"></i></div>
                            </div>
                        </a>
                    </li>`
            $('#musicLists').append(li)

        }
    }, function (error) {
        alert('获取失败，请刷新重试')
    });
</script>
</body>
</html>